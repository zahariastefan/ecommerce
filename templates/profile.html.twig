{% extends 'base.html.twig' %}

{% block body %}
    <div class="row profile_row_body">
        <div class="col">
            <h2 style="padding-top:100px">Comanzi Active</h2>
            {% for orderedItemArray in orderedItems %}
                {% for date, orderedItemArray2 in orderedItemArray %}
                    {% for orderedItemSingle in orderedItemArray2 %}
{#                        {{ dump(orderedItemSingle) }}#}
                        <div class="container return_div_{{ orderedItemSingle.id }}">
                            <strong> Data Plasarii Comenzii: {{ date }} </strong><br><br>
                            Product Title: {{ orderedItemSingle.product.title }} <br>
                            Quantity: {{ orderedItemSingle.quantity }} <br>
                            Address Delivery: {{ orderedItemSingle.address }} <br>
                            Phone: {{ orderedItemSingle.phone }} <br><br>
                            <input type="hidden" name="retur_{{ orderedItemSingle.id }}" class="retur_{{ orderedItemSingle.id }}" value="{{ orderedItemSingle.id }}">
                            <button>Returneaza</button><br><br>
                        </div>
                    {% endfor %}
                {% endfor %}
            {% endfor %}
            <button class="cancel_order">Anuleaza Comanda</button>
        </div>

        <div class="col">
            <h2 style="padding-top:100px">Comanzi Livrate</h2>
            {% for orderedItem in deliveredItems %}
                {% for date, orderedItemArray in orderedItem %}
                    {% for orderedItemSingle in orderedItemArray %}
                            <strong> Data Plasarii Comenzii: {{ date }} </strong><br><br>
                            Product Title: {{ orderedItemSingle.product.title }} <br>
                            Quantity: {{ orderedItemSingle.quantity }} <br>
                            Address Delivery: {{ orderedItemSingle.address }} <br>
                            Phone: {{ orderedItemSingle.phone }} <br>
                            Livrat pe: {{ orderedItemSingle.deliveredAt|date('Y-m-d H:m:s') }} <br><br>
                    {% endfor %}
                {% endfor %}
            {% endfor %}
        </div>
    </div>




    <script>
        $('.cancel_order').click(()=>{

            var path = '{{ path('app_cancel_order') }}';
            var fullUrl   = window.location.origin + path;
            $.ajax({
                type: "POST",
                url: fullUrl,
                data: {
                    user : '{{ app.user.email }}',
                },
                complete: function (data) {

                }
            });

            });
    </script>
{% endblock %}